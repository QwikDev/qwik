---
title: Zerops Node Adapter and Middleware | Deployments
contributors:
  - nermalcat69
updated_at: ''
created_at: ''
---

import PackageManagerTabs from '~/components/package-manager-tabs/index.tsx';

# Zerops Node Adapter

Qwik City Zerops Node adapter allows you to deploy SSR Node app to [Zerops](https://zerops.io/).

## Installation

To integrate the `zerops-node` adapter, use the `add` command:

<PackageManagerTabs>
<span q:slot="pnpm">
```shell
pnpm run qwik add zerops-node
```
</span>
<span q:slot="npm">
```shell
npm run qwik add zerops-node
```
</span>
<span q:slot="yarn">
```shell
yarn run qwik add zerops-node
```
</span>
<span q:slot="bun">
```shell
bun run qwik add zerops-node
```
</span>
</PackageManagerTabs>

> It will automatically install the required dependencies, including the [Zerops CLI](https://docs.zerops.io/references/cli). Which will help you deploy with the cli to Zerops.

The adapter will add a new `vite.config.ts` within the `adapters/` directory, and a new entry file will be created, such as:

```shell
└── adapters/
    └── zerops-node/
        └── vite.config.ts
└── src/
    └── entry.express.tsx
```

Additionally, within the `package.json`, the `build.server` and `deploy` scripts will be updated.

## Production build

To build the application for production, use the `build` command, this command will automatically run `build.server` and `build.client`:

<PackageManagerTabs>
<span q:slot="pnpm">
```shell
pnpm run build
```
</span>
<span q:slot="npm">
```shell
npm run build
```
</span>
<span q:slot="yarn">
```shell
yarn run build
```
</span>
<span q:slot="bun">
```shell
bun run build
```
</span>
</PackageManagerTabs>


## Dev deploy

To deploy the application for development:

<PackageManagerTabs>
<span q:slot="pnpm">
```shell
pnpm run deploy
```
</span>
<span q:slot="npm">
```shell
npm run deploy
```
</span>
<span q:slot="yarn">
```shell
yarn run deploy
```
</span>
<span q:slot="bun">
```shell
bun run deploy
```
</span>
</PackageManagerTabs>

Notice that you might need a [Vercel account](https://vercel.com/docs/concepts/get-started) in order to complete this step!

## Production deploy

After installing the integration the project is ready to be deployed to Zerops. However, you will need to create a git repository and push the code to it.

Please refer to the Zerops docs for more information on how to deploy your site: [Zerops docs](https://docs.zerops.io/nodejs/how-to/trigger-pipeline)

## Advanced

### Zerops Node Entry Middleware

When the `zerops-node` adapter is added, a new entry file will be created at `src/entry.express.tsx`. Below is an example of using the built-in middleware within the entry file.

```tsx title="src/entry.zerops-node.tsx"
import {
  createQwikCity,
  type PlatformNode,
} from "@builder.io/qwik-city/middleware/node";
import "dotenv/config";
import qwikCityPlan from "@qwik-city-plan";
import { manifest } from "@qwik-client-manifest";
import render from "./entry.ssr";
import express from "express";
import { fileURLToPath } from "node:url";
import { join } from "node:path";

declare global {
  interface QwikCityPlatform extends PlatformNode { }
}

const distDir = join(fileURLToPath(import.meta.url), "..", "..", "dist");
const buildDir = join(distDir, "build");

const PORT = process.env.PORT ?? 3000;

const { router, notFound } = createQwikCity({
  render,
  qwikCityPlan,
  manifest,
});

const app = express();

app.use(`/build`, express.static(buildDir, { immutable: true, maxAge: "1y" }));
app.use(express.static(distDir, { redirect: false }));

app.use(router);

app.use(notFound);

app.listen(PORT, () => {
  console.log(`Server started: http://localhost:${PORT}/`);
});

```
