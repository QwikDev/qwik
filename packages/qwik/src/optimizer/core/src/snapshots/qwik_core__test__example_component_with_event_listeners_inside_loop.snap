---
source: packages/qwik/src/optimizer/core/src/test.rs
assertion_line: 3979
expression: output
snapshot_kind: text
---
==INPUT==


import { $, component$, useStore, useSignal } from '@qwik.dev/core';
export const App = component$(() => {
      const cart = useStore<string[]>([]);
      const results = useSignal(['foo']);
      function loopArrowFn(results: string[]) {
        return results.map((item) => (
          <span
            onClick$={() => {
              cart.push(item);
            }}
          >
            {item}
          </span>
        ));
      }
      function loopForI(results: string[]) {
        const items = [];
        for (let i = 0; i < results.length; i++) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[i]);
              }}
            >
              {results[i]}
            </span>
          );
        }
        return items;
      }
      function loopForOf(results: string[]) {
        const items = [];
        for (const item of results) {
          items.push(
            <span
              onClick$={() => {
                cart.push(item);
              }}
            >
              {item}
            </span>
          );
        }
        return items;
      }
      function loopForIn(results: string[]) {
        const items = [];
        for (const key in results) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[key]);
              }}
            >
              {results[key]}
            </span>
          );
        }
        return items;
      }
      function loopWhile(results: string[]) {
        const items = [];
        let i = 0;
        while (i < results.length) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[i]);
              }}
            >
              {results[i]}
            </span>
          );
          i++;
        }
        return items;
      }
      return (
        <div>
          {results.value.map((item) => (
            <button
              id="second"
              onClick$={() => {
                cart.push(item);
              }}
            >
              {item}
            </button>
          ))}
          {loopArrowFn(results.value)}
          {loopForI(results.value)}
          {loopForOf(results.value)}
          {loopForIn(results.value)}
          {loopWhile(results.value)}
        </div>
      );
    });

============================= test.js ==

import { componentQrl } from "@qwik.dev/core";
import { qrl } from "@qwik.dev/core";
import { _addLoc } from "@qwik.dev/core/internal";
export const App = /*#__PURE__*/ _addLoc(componentQrl(/*#__PURE__*/ qrl(()=>import("./test.tsx_App_component_ckEPmXZlub0"), "App_component_ckEPmXZlub0")), "test.tsx", 4, 20);


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";;;AAEA,OAAO,MAAM,oBAAM,QAAA,qIA+FZ\"}")
============================= test.tsx_span_onClick_3_SNi9ryRSSHk.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const span_onClick_3_SNi9ryRSSHk = ()=>{
    const [cart, i, results] = useLexicalScope();
    cart.push(results[i]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";0CAmEwB;;IACR,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE\"}")
/*
{
  "origin": "test.tsx",
  "name": "span_onClick_3_SNi9ryRSSHk",
  "entry": null,
  "displayName": "test.tsx_span_onClick_3",
  "hash": "SNi9ryRSSHk",
  "canonicalFilename": "test.tsx_span_onClick_3_SNi9ryRSSHk",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    1693,
    1755
  ],
  "captureNames": [
    "cart",
    "i",
    "results"
  ]
}
*/
============================= test.tsx_div_button_onClick_fM2x0QeHwqY.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const div_button_onClick_fM2x0QeHwqY = ()=>{
    const [cart, item] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";8CAmFwB;;IACR,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "div_button_onClick_fM2x0QeHwqY",
  "entry": null,
  "displayName": "test.tsx_div_button_onClick",
  "hash": "fM2x0QeHwqY",
  "canonicalFilename": "test.tsx_div_button_onClick_fM2x0QeHwqY",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    2026,
    2082
  ],
  "captureNames": [
    "cart",
    "item"
  ]
}
*/
============================= test.tsx_loopArrowFn_span_onClick_dZY4CbPeza8.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const loopArrowFn_span_onClick_dZY4CbPeza8 = ()=>{
    const [cart, item] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";oDAQsB;;IACR,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "loopArrowFn_span_onClick_dZY4CbPeza8",
  "entry": null,
  "displayName": "test.tsx_loopArrowFn_span_onClick",
  "hash": "dZY4CbPeza8",
  "canonicalFilename": "test.tsx_loopArrowFn_span_onClick_dZY4CbPeza8",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    319,
    371
  ],
  "captureNames": [
    "cart",
    "item"
  ]
}
*/
============================= test.tsx_App_component_ckEPmXZlub0.js (ENTRY POINT)==

import { _addLoc } from "@qwik.dev/core/internal";
import { _fnSignal } from "@qwik.dev/core";
import { _jsxSorted } from "@qwik.dev/core";
import { qrl } from "@qwik.dev/core";
import { useSignal } from "@qwik.dev/core";
import { useStore } from "@qwik.dev/core";
export const App_component_ckEPmXZlub0 = ()=>{
    const cart = _addLoc(useStore([]), "test.tsx", 5, 20);
    const results = _addLoc(useSignal([
        'foo'
    ]), "test.tsx", 6, 23);
    function loopArrowFn(results) {
        return results.map((item)=>/*#__PURE__*/ _jsxSorted("span", {
                onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_loopArrowFn_span_onClick_dZY4CbPeza8"), "loopArrowFn_span_onClick_dZY4CbPeza8", [
                    cart,
                    item
                ])
            }, null, item, 0, "u6_0"));
    }
    function loopForI(results) {
        const items = _addLoc([], "test.tsx", 19, 23);
        for(let i = _addLoc(0, "test.tsx", 20, 22); i < results.length; i++)items.push(/*#__PURE__*/ _jsxSorted("span", {
            onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_span_onClick_bnc9pPZyjck"), "span_onClick_bnc9pPZyjck", [
                cart,
                i,
                results
            ])
        }, null, _fnSignal((p0, p1)=>p1[p0], [
            i,
            results
        ], "p1[p0]"), 0, "u6_1"));
        return items;
    }
    function loopForOf(results) {
        const items = _addLoc([], "test.tsx", 34, 23);
        for (const item of results)items.push(/*#__PURE__*/ _jsxSorted("span", {
            onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_span_onClick_1_VGRWU5xRxes"), "span_onClick_1_VGRWU5xRxes", [
                cart,
                item
            ])
        }, null, item, 2, "u6_2"));
        return items;
    }
    function loopForIn(results) {
        const items = _addLoc([], "test.tsx", 49, 23);
        for(const key in results)items.push(/*#__PURE__*/ _jsxSorted("span", {
            onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_span_onClick_2_YbCllFwPBNk"), "span_onClick_2_YbCllFwPBNk", [
                cart,
                key,
                results
            ])
        }, null, _fnSignal((p0, p1)=>p1[p0], [
            key,
            results
        ], "p1[p0]"), 0, "u6_3"));
        return items;
    }
    function loopWhile(results) {
        const items = _addLoc([], "test.tsx", 64, 23);
        let i = _addLoc(0, "test.tsx", 65, 17);
        while(i < results.length){
            items.push(/*#__PURE__*/ _jsxSorted("span", {
                onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_span_onClick_3_SNi9ryRSSHk"), "span_onClick_3_SNi9ryRSSHk", [
                    cart,
                    i,
                    results
                ])
            }, null, _fnSignal((p0, p1)=>p1[p0], [
                i,
                results
            ], "p1[p0]"), 0, "u6_4"));
            i++;
        }
        return items;
    }
    return /*#__PURE__*/ _jsxSorted("div", null, null, [
        results.value.map((item)=>/*#__PURE__*/ _jsxSorted("button", {
                onClick$: /*#__PURE__*/ qrl(()=>import("./test.tsx_div_button_onClick_fM2x0QeHwqY"), "div_button_onClick_fM2x0QeHwqY", [
                    cart,
                    item
                ])
            }, {
                id: "second"
            }, item, 0, "u6_5")),
        loopArrowFn(results.value),
        loopForI(results.value),
        loopForOf(results.value),
        loopForIn(results.value),
        loopWhile(results.value)
    ], 1, "u6_6");
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";;;;;;yCAE8B;IACxB,MAAM,OAAO,QAAA,SAAmB,EAAE;IAClC,MAAM,UAAU,QAAA,UAAU;QAAC;KAAM;IACjC,SAAS,YAAY,OAAiB;QACpC,OAAO,QAAQ,GAAG,CAAC,CAAC,qBAClB,WAAC;gBACC,QAAQ;;;;qBAIP;IAGP;IACA,SAAS,SAAS,OAAiB;QACjC,MAAM,QAAQ,QAAA,EAAE;QAChB,IAAK,IAAI,IAAI,QAAA,wBAAG,IAAI,QAAQ,MAAM,EAAE,IAClC,MAAM,IAAI,eACR,WAAC;YACC,QAAQ;;;;;qCAIP,EAAO,IAAG;;;;QAIjB,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,QAAA,EAAE;QAChB,KAAK,MAAM,QAAQ,QACjB,MAAM,IAAI,eACR,WAAC;YACC,QAAQ;;;;iBAIP;QAIP,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,QAAA,EAAE;QAChB,IAAK,MAAM,OAAO,QAChB,MAAM,IAAI,eACR,WAAC;YACC,QAAQ;;;;;qCAIP,EAAO,IAAK;;;;QAInB,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,QAAA,EAAE;QAChB,IAAI,IAAI,QAAA;QACR,MAAO,IAAI,QAAQ,MAAM,CAAE;YACzB,MAAM,IAAI,eACR,WAAC;gBACC,QAAQ;;;;;yCAIP,EAAO,IAAG;;;;YAGf;QACF;QACA,OAAO;IACT;IACA,qBACE,WAAC;QACE,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,qBAClB,WAAC;gBAEC,QAAQ;;;;;gBADR,IAAG;eAKF;QAGJ,YAAY,QAAQ,KAAK;QACzB,SAAS,QAAQ,KAAK;QACtB,UAAU,QAAQ,KAAK;QACvB,UAAU,QAAQ,KAAK;QACvB,UAAU,QAAQ,KAAK;;AAG9B\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_ckEPmXZlub0",
  "entry": null,
  "displayName": "test.tsx_App_component",
  "hash": "ckEPmXZlub0",
  "canonicalFilename": "test.tsx_App_component_ckEPmXZlub0",
  "path": "",
  "extension": "js",
  "parent": null,
  "ctxKind": "function",
  "ctxName": "component$",
  "captures": false,
  "loc": [
    101,
    2370
  ]
}
*/
============================= test.tsx_span_onClick_bnc9pPZyjck.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const span_onClick_bnc9pPZyjck = ()=>{
    const [cart, i, results] = useLexicalScope();
    cart.push(results[i]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";wCAqBwB;;IACR,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE\"}")
/*
{
  "origin": "test.tsx",
  "name": "span_onClick_bnc9pPZyjck",
  "entry": null,
  "displayName": "test.tsx_span_onClick",
  "hash": "bnc9pPZyjck",
  "canonicalFilename": "test.tsx_span_onClick_bnc9pPZyjck",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    628,
    690
  ],
  "captureNames": [
    "cart",
    "i",
    "results"
  ]
}
*/
============================= test.tsx_span_onClick_2_YbCllFwPBNk.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const span_onClick_2_YbCllFwPBNk = ()=>{
    const [cart, key, results] = useLexicalScope();
    cart.push(results[key]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";0CAmDwB;;IACR,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI\"}")
/*
{
  "origin": "test.tsx",
  "name": "span_onClick_2_YbCllFwPBNk",
  "entry": null,
  "displayName": "test.tsx_span_onClick_2",
  "hash": "YbCllFwPBNk",
  "canonicalFilename": "test.tsx_span_onClick_2_YbCllFwPBNk",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    1319,
    1383
  ],
  "captureNames": [
    "cart",
    "key",
    "results"
  ]
}
*/
============================= test.tsx_span_onClick_1_VGRWU5xRxes.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const span_onClick_1_VGRWU5xRxes = ()=>{
    const [cart, item] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";0CAoCwB;;IACR,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "span_onClick_1_VGRWU5xRxes",
  "entry": null,
  "displayName": "test.tsx_span_onClick_1",
  "hash": "VGRWU5xRxes",
  "canonicalFilename": "test.tsx_span_onClick_1_VGRWU5xRxes",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    980,
    1036
  ],
  "captureNames": [
    "cart",
    "item"
  ]
}
*/
== DIAGNOSTICS ==

[]
