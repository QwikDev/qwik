---
source: packages/qwik/src/optimizer/core/src/test.rs
assertion_line: 3980
expression: output
---
==INPUT==


import { $, component$, useStore, useSignal } from '@qwik.dev/core';
export const App = component$(() => {
      const cart = useStore<string[]>([]);
      const results = useSignal(['foo']);
      function loopArrowFn(results: string[]) {
        return results.map((item) => (
          <span
            onClick$={() => {
              cart.push(item);
            }}
          >
            {item}
          </span>
        ));
      }
      function loopForI(results: string[]) {
        const items = [];
        for (let i = 0; i < results.length; i++) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[i]);
              }}
            >
              {results[i]}
            </span>
          );
        }
        return items;
      }
      function loopForOf(results: string[]) {
        const items = [];
        for (const item of results) {
          items.push(
            <span
              onClick$={() => {
                cart.push(item);
              }}
            >
              {item}
            </span>
          );
        }
        return items;
      }
      function loopForIn(results: string[]) {
        const items = [];
        for (const key in results) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[key]);
              }}
            >
              {results[key]}
            </span>
          );
        }
        return items;
      }
      function loopWhile(results: string[]) {
        const items = [];
        let i = 0;
        while (i < results.length) {
          items.push(
            <span
              onClick$={() => {
                cart.push(results[i]);
              }}
            >
              {results[i]}
            </span>
          );
          i++;
        }
        return items;
      }
      return (
        <div>
          {results.value.map((item) => (
            <button
              id="second"
              onClick$={() => {
                cart.push(item);
              }}
            >
              {item}
            </button>
          ))}
          {loopArrowFn(results.value)}
          {loopForI(results.value)}
          {loopForOf(results.value)}
          {loopForIn(results.value)}
          {loopWhile(results.value)}
        </div>
      );
    });

============================= test.js ==

import { componentQrl } from "@qwik.dev/core";
import { qrl } from "@qwik.dev/core";
const i_ckEPmXZlub0 = ()=>import("./test.tsx_App_component_ckEPmXZlub0");
export const App = /*#__PURE__*/ componentQrl(/*#__PURE__*/ qrl(i_ckEPmXZlub0, "App_component_ckEPmXZlub0"));


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";;;AAEA,OAAO,MAAM,oBAAM,4EA+FZ\"}")
============================= test.tsx_App_component_loopArrowFn_span_on_click_LKE0yw7iEx4.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_loopArrowFn_span_on_click_LKE0yw7iEx4 = (_, _1, item)=>{
    const [cart] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";mEAQsB,QAFM;;IAGd,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_loopArrowFn_span_on_click_LKE0yw7iEx4",
  "entry": null,
  "displayName": "test.tsx_App_component_loopArrowFn_span_on_click",
  "hash": "LKE0yw7iEx4",
  "canonicalFilename": "test.tsx_App_component_loopArrowFn_span_on_click_LKE0yw7iEx4",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    319,
    371
  ],
  "paramNames": [
    "_",
    "_",
    "item"
  ],
  "captureNames": [
    "cart"
  ]
}
*/
============================= test.tsx_App_component_loopForOf_span_on_click_Tsqf6v6tRCw.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_loopForOf_span_on_click_Tsqf6v6tRCw = (_, _1, item)=>{
    const [cart] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";iEAoCwB,QAHL;;IAIH,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_loopForOf_span_on_click_Tsqf6v6tRCw",
  "entry": null,
  "displayName": "test.tsx_App_component_loopForOf_span_on_click",
  "hash": "Tsqf6v6tRCw",
  "canonicalFilename": "test.tsx_App_component_loopForOf_span_on_click_Tsqf6v6tRCw",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    980,
    1036
  ],
  "paramNames": [
    "_",
    "_",
    "item"
  ],
  "captureNames": [
    "cart"
  ]
}
*/
============================= test.tsx_App_component_div_button_on_click_5a2ivZyN1Y0.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_div_button_on_click_5a2ivZyN1Y0 = (_, _1, item)=>{
    const [cart] = useLexicalScope();
    cart.push(item);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";6DAmFwB,QAHM;;IAId,KAAK,IAAI,CAAC\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_div_button_on_click_5a2ivZyN1Y0",
  "entry": null,
  "displayName": "test.tsx_App_component_div_button_on_click",
  "hash": "5a2ivZyN1Y0",
  "canonicalFilename": "test.tsx_App_component_div_button_on_click_5a2ivZyN1Y0",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    2026,
    2082
  ],
  "paramNames": [
    "_",
    "_",
    "item"
  ],
  "captureNames": [
    "cart"
  ]
}
*/
============================= test.tsx_App_component_loopForIn_span_on_click_q4maSW2qtLo.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_loopForIn_span_on_click_q4maSW2qtLo = (_, _1, key)=>{
    const [cart, results] = useLexicalScope();
    cart.push(results[key]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";iEAmDwB,QAHL;;IAIH,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_loopForIn_span_on_click_q4maSW2qtLo",
  "entry": null,
  "displayName": "test.tsx_App_component_loopForIn_span_on_click",
  "hash": "q4maSW2qtLo",
  "canonicalFilename": "test.tsx_App_component_loopForIn_span_on_click_q4maSW2qtLo",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    1319,
    1383
  ],
  "paramNames": [
    "_",
    "_",
    "key"
  ],
  "captureNames": [
    "cart",
    "results"
  ]
}
*/
============================= test.tsx_App_component_loopForI_span_on_click_X0FbAads0bo.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_loopForI_span_on_click_X0FbAads0bo = (_, _1, i)=>{
    const [cart, results] = useLexicalScope();
    cart.push(results[i]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";gEAqBwB,QAHP;;IAID,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_loopForI_span_on_click_X0FbAads0bo",
  "entry": null,
  "displayName": "test.tsx_App_component_loopForI_span_on_click",
  "hash": "X0FbAads0bo",
  "canonicalFilename": "test.tsx_App_component_loopForI_span_on_click_X0FbAads0bo",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    628,
    690
  ],
  "paramNames": [
    "_",
    "_",
    "i"
  ],
  "captureNames": [
    "cart",
    "results"
  ]
}
*/
============================= test.tsx_App_component_ckEPmXZlub0.js (ENTRY POINT)==

import { _fnSignal } from "@qwik.dev/core";
import { _jsxSorted } from "@qwik.dev/core";
import { qrl } from "@qwik.dev/core";
import { useSignal } from "@qwik.dev/core";
import { useStore } from "@qwik.dev/core";
const _hf0 = (p0, p1)=>p1[p0];
const _hf0_str = "p1[p0]";
const i_5a2ivZyN1Y0 = ()=>import("./test.tsx_App_component_div_button_on_click_5a2ivZyN1Y0");
const i_LKE0yw7iEx4 = ()=>import("./test.tsx_App_component_loopArrowFn_span_on_click_LKE0yw7iEx4");
const i_Tsqf6v6tRCw = ()=>import("./test.tsx_App_component_loopForOf_span_on_click_Tsqf6v6tRCw");
const i_X0FbAads0bo = ()=>import("./test.tsx_App_component_loopForI_span_on_click_X0FbAads0bo");
const i_lmVICn9DFs8 = ()=>import("./test.tsx_App_component_loopWhile_span_on_click_lmVICn9DFs8");
const i_q4maSW2qtLo = ()=>import("./test.tsx_App_component_loopForIn_span_on_click_q4maSW2qtLo");
export const App_component_ckEPmXZlub0 = ()=>{
    const cart = useStore([]);
    const results = useSignal([
        'foo'
    ]);
    const App_component_loopArrowFn_span_on_click_LKE0yw7iEx4 = /*#__PURE__*/ qrl(i_LKE0yw7iEx4, "App_component_loopArrowFn_span_on_click_LKE0yw7iEx4", [
        cart
    ]);
    const App_component_loopForI_span_on_click_X0FbAads0bo = /*#__PURE__*/ qrl(i_X0FbAads0bo, "App_component_loopForI_span_on_click_X0FbAads0bo", [
        cart,
        results
    ]);
    const App_component_loopForOf_span_on_click_Tsqf6v6tRCw = /*#__PURE__*/ qrl(i_Tsqf6v6tRCw, "App_component_loopForOf_span_on_click_Tsqf6v6tRCw", [
        cart
    ]);
    const App_component_loopForIn_span_on_click_q4maSW2qtLo = /*#__PURE__*/ qrl(i_q4maSW2qtLo, "App_component_loopForIn_span_on_click_q4maSW2qtLo", [
        cart,
        results
    ]);
    const App_component_loopWhile_span_on_click_lmVICn9DFs8 = /*#__PURE__*/ qrl(i_lmVICn9DFs8, "App_component_loopWhile_span_on_click_lmVICn9DFs8", [
        cart,
        results
    ]);
    const App_component_div_button_on_click_5a2ivZyN1Y0 = /*#__PURE__*/ qrl(i_5a2ivZyN1Y0, "App_component_div_button_on_click_5a2ivZyN1Y0", [
        cart
    ]);
    function loopArrowFn(results) {
        return results.map((item)=>/*#__PURE__*/ _jsxSorted("span", {
                "on:click": App_component_loopArrowFn_span_on_click_LKE0yw7iEx4,
                "q:row": [
                    item
                ]
            }, null, item, 0, "u6_0"));
    }
    function loopForI(results) {
        const items = [];
        for(let i = 0; i < results.length; i++)items.push(/*#__PURE__*/ _jsxSorted("span", {
            "on:click": App_component_loopForI_span_on_click_X0FbAads0bo,
            "q:row": [
                i
            ]
        }, null, _fnSignal(_hf0, [
            i,
            results
        ], _hf0_str), 0, "u6_1"));
        return items;
    }
    function loopForOf(results) {
        const items = [];
        for (const item of results)items.push(/*#__PURE__*/ _jsxSorted("span", {
            "on:click": App_component_loopForOf_span_on_click_Tsqf6v6tRCw,
            "q:row": [
                item
            ]
        }, null, item, 2, "u6_2"));
        return items;
    }
    function loopForIn(results) {
        const items = [];
        for(const key in results)items.push(/*#__PURE__*/ _jsxSorted("span", {
            "on:click": App_component_loopForIn_span_on_click_q4maSW2qtLo,
            "q:row": [
                key
            ]
        }, null, _fnSignal(_hf0, [
            key,
            results
        ], _hf0_str), 0, "u6_3"));
        return items;
    }
    function loopWhile(results) {
        const items = [];
        let i = 0;
        while(i < results.length){
            items.push(/*#__PURE__*/ _jsxSorted("span", {
                "on:click": App_component_loopWhile_span_on_click_lmVICn9DFs8,
                "q:row": [
                    i
                ]
            }, null, _fnSignal(_hf0, [
                i,
                results
            ], _hf0_str), 0, "u6_4"));
            i++;
        }
        return items;
    }
    return /*#__PURE__*/ _jsxSorted("div", null, null, [
        results.value.map((item)=>/*#__PURE__*/ _jsxSorted("button", {
                "on:click": App_component_div_button_on_click_5a2ivZyN1Y0,
                "q:row": [
                    item
                ]
            }, {
                id: "second"
            }, item, 0, "u6_5")),
        loopArrowFn(results.value),
        loopForI(results.value),
        loopForOf(results.value),
        loopForIn(results.value),
        loopWhile(results.value)
    ], 1, "u6_6");
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";;;;;uBAyBe,EAAO,IAAG;;;;;;;;yCAvBK;IACxB,MAAM,OAAO,SAAmB,EAAE;IAClC,MAAM,UAAU,UAAU;QAAC;KAAM;;;;;;;;;;;;;;;;;;;;;;IACjC,SAAS,YAAY,OAAiB;QACpC,OAAO,QAAQ,GAAG,CAAC,CAAC,qBAClB,WAAC;gBACC,UAAQ;;oBAFQ;;qBAMf;IAGP;IACA,SAAS,SAAS,OAAiB;QACjC,MAAM,QAAQ,EAAE;QAChB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAClC,MAAM,IAAI,eACR,WAAC;YACC,UAAQ;;gBAHL;;;;;;QAWT,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,EAAE;QAChB,KAAK,MAAM,QAAQ,QACjB,MAAM,IAAI,eACR,WAAC;YACC,UAAQ;;gBAHH;;iBAOJ;QAIP,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,EAAE;QAChB,IAAK,MAAM,OAAO,QAChB,MAAM,IAAI,eACR,WAAC;YACC,UAAQ;;gBAHH;;;;;;QAWX,OAAO;IACT;IACA,SAAS,UAAU,OAAiB;QAClC,MAAM,QAAQ,EAAE;QAChB,IAAI,IAAI;QACR,MAAO,IAAI,QAAQ,MAAM,CAAE;YACzB,MAAM,IAAI,eACR,WAAC;gBACC,UAAQ;;oBAHP;;;;;;YAUL;QACF;QACA,OAAO;IACT;IACA,qBACE,WAAC;QACE,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,qBAClB,WAAC;gBAEC,UAAQ;;oBAHQ;;;gBAEhB,IAAG;eAKF;QAGJ,YAAY,QAAQ,KAAK;QACzB,SAAS,QAAQ,KAAK;QACtB,UAAU,QAAQ,KAAK;QACvB,UAAU,QAAQ,KAAK;QACvB,UAAU,QAAQ,KAAK;;AAG9B\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_ckEPmXZlub0",
  "entry": null,
  "displayName": "test.tsx_App_component",
  "hash": "ckEPmXZlub0",
  "canonicalFilename": "test.tsx_App_component_ckEPmXZlub0",
  "path": "",
  "extension": "js",
  "parent": null,
  "ctxKind": "function",
  "ctxName": "component$",
  "captures": false,
  "loc": [
    101,
    2370
  ]
}
*/
============================= test.tsx_App_component_loopWhile_span_on_click_lmVICn9DFs8.js (ENTRY POINT)==

import { useLexicalScope } from "@qwik.dev/core";
export const App_component_loopWhile_span_on_click_lmVICn9DFs8 = (_, _1, i)=>{
    const [cart, results] = useLexicalScope();
    cart.push(results[i]);
};


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\";iEAmEwB,QAHT;;IAIC,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE\"}")
/*
{
  "origin": "test.tsx",
  "name": "App_component_loopWhile_span_on_click_lmVICn9DFs8",
  "entry": null,
  "displayName": "test.tsx_App_component_loopWhile_span_on_click",
  "hash": "lmVICn9DFs8",
  "canonicalFilename": "test.tsx_App_component_loopWhile_span_on_click_lmVICn9DFs8",
  "path": "",
  "extension": "js",
  "parent": "App_component_ckEPmXZlub0",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    1693,
    1755
  ],
  "paramNames": [
    "_",
    "_",
    "i"
  ],
  "captureNames": [
    "cart",
    "results"
  ]
}
*/
== DIAGNOSTICS ==

[]
