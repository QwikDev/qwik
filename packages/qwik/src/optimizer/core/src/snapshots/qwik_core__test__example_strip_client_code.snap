---
source: packages/qwik/src/optimizer/core/src/test.rs
assertion_line: 1930
expression: output
---
==INPUT==


import { component$, useClientMount$, useStore, useTask$ } from '@qwik.dev/core';
import mongo from 'mongodb';
import redis from 'redis';
import threejs from 'threejs';
import { a } from './keep';
import { b } from '../keep2';
import { c } from '../../remove';

export const Parent = component$(() => {
	const state = useStore({
		text: ''
	});

	// Double count watch
	useClientMount$(async () => {
		state.text = await mongo.users();
		redis.set(state.text, a, b, c);
	});

	useTask$(() => {
		// Code
	});

	return (
		<div
			shouldRemove$={() => state.text}
			onClick$={() => console.log('parent', state, threejs)}
		>
			<Div
				onClick$={() => console.log('keep')}
				render$={() => state.text}
			/>
			{state.text}
		</div>
	);
});

============================= components/component.tsx_Parent_component_useClientMount_Yn2kIDABoYw.js (ENTRY POINT)==

export const Parent_component_useClientMount_Yn2kIDABoYw = null;


Some("{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}")
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_useClientMount_Yn2kIDABoYw",
  "entry": null,
  "displayName": "component.tsx_Parent_component_useClientMount",
  "hash": "Yn2kIDABoYw",
  "canonicalFilename": "component.tsx_Parent_component_useClientMount_Yn2kIDABoYw",
  "path": "components",
  "extension": "js",
  "parent": "Parent_component_t6Wy3C0Q0XM",
  "ctxKind": "function",
  "ctxName": "useClientMount$",
  "captures": true,
  "loc": [
    0,
    0
  ],
  "captureNames": [
    "state"
  ]
}
*/
============================= components/component.tsx_Parent_component_div_shouldRemove_EBj69wTX1do.js (ENTRY POINT)==

export const Parent_component_div_shouldRemove_EBj69wTX1do = null;


Some("{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}")
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_div_shouldRemove_EBj69wTX1do",
  "entry": null,
  "displayName": "component.tsx_Parent_component_div_shouldRemove",
  "hash": "EBj69wTX1do",
  "canonicalFilename": "component.tsx_Parent_component_div_shouldRemove_EBj69wTX1do",
  "path": "components",
  "extension": "js",
  "parent": "Parent_component_t6Wy3C0Q0XM",
  "ctxKind": "eventHandler",
  "ctxName": "shouldRemove$",
  "captures": true,
  "loc": [
    0,
    0
  ],
  "captureNames": [
    "state"
  ]
}
*/
============================= components/component.tsx_Parent_component_div_onClick_0PioS4FByUg.js (ENTRY POINT)==

export const Parent_component_div_onClick_0PioS4FByUg = null;


Some("{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}")
/*
{
  "origin": "components/component.tsx",
  "name": "Parent_component_div_onClick_0PioS4FByUg",
  "entry": null,
  "displayName": "component.tsx_Parent_component_div_onClick",
  "hash": "0PioS4FByUg",
  "canonicalFilename": "component.tsx_Parent_component_div_onClick_0PioS4FByUg",
  "path": "components",
  "extension": "js",
  "parent": "Parent_component_t6Wy3C0Q0XM",
  "ctxKind": "eventHandler",
  "ctxName": "onClick$",
  "captures": true,
  "loc": [
    0,
    0
  ],
  "captureNames": [
    "state"
  ]
}
*/
============================= components/component.js ==

import "./keep";
import "../keep2";
import { componentQrl } from "@qwik.dev/core";
import { useClientMountQrl } from "@qwik.dev/core";
import { _noopQrl } from "@qwik.dev/core";
import { useTaskQrl } from "@qwik.dev/core";
import { inlinedQrl } from "@qwik.dev/core";
import { _wrapProp } from "@qwik.dev/core";
import { useLexicalScope } from "@qwik.dev/core";
import { _jsxSorted } from "@qwik.dev/core";
import { useStore } from '@qwik.dev/core';
export const Parent = /*#__PURE__*/ componentQrl(/*#__PURE__*/ inlinedQrl(()=>{
    const state = useStore({
        text: ''
    });
    // Double count watch
    useClientMountQrl(/*#__PURE__*/ _noopQrl("Parent_component_useClientMount_Yn2kIDABoYw", [
        state
    ]));
    useTaskQrl(/*#__PURE__*/ inlinedQrl(()=>{
    // Code
    }, "Parent_component_useTask_ngmvcygWux8"));
    return /*#__PURE__*/ _jsxSorted("div", null, {
        shouldRemove$: /*#__PURE__*/ _noopQrl("Parent_component_div_shouldRemove_EBj69wTX1do", [
            state
        ]),
        onClick$: /*#__PURE__*/ _noopQrl("Parent_component_div_onClick_0PioS4FByUg", [
            state
        ])
    }, [
        /*#__PURE__*/ _jsxSorted(Div, null, {
            onClick$: /*#__PURE__*/ inlinedQrl(()=>console.log('keep'), "Parent_component_div_Div_onClick_kgowuto5dR0"),
            render$: /*#__PURE__*/ inlinedQrl(()=>{
                const [state] = useLexicalScope();
                return state.text;
            }, "Parent_component_div_Div_render_CkMybN6xzQk", [
                state
            ])
        }, null, 3, "7R_0"),
        _wrapProp(state, "text")
    ], 1, "7R_1");
}, "Parent_component_t6Wy3C0Q0XM"));


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/components/component.tsx\"],\"names\":[],\"mappings\":\";;;;;;;;;;AACA,SAAsC,QAAQ,QAAkB,iBAAiB;AAQjF,OAAO,MAAM,uBAAS,sCAAW;IAChC,MAAM,QAAQ,SAAS;QACtB,MAAM;IACP;IAEA,qBAAqB;IACrB;;;IAKA,oCAAS;IACR,OAAO;IACR;IAEA,qBACC,WAAC;QACA,aAAa;;;QACb,QAAQ;;;;sBAER,WAAC;YACA,QAAQ,2BAAE,IAAM,QAAQ,GAAG,CAAC;YAC5B,OAAO,2BAAE;;uBAAM,MAAM,IAAI;;;;;kBAEzB;;AAGJ,oCAAG\"}")
== DIAGNOSTICS ==

[]
